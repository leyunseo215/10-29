import streamlit as st
import random

# 🌤️ 페이지 기본 설정
st.set_page_config(page_title="💃 오늘의 패션 추천 프리미엄 ✨", page_icon="👗", layout="centered")

# 💖 CSS 꾸미기
st.markdown(
    """
    <style>
    body {
        background: linear-gradient(120deg, #FFDEE9 0%, #B5FFFC 100%);
        animation: gradient 6s ease infinite;
        background-size: 400% 400%;
    }
    @keyframes gradient {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    h1 {
        font-size: 60px !important;
        text-align: center;
        background: -webkit-linear-gradient(#ff5f6d, #ffc371);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: glow 2s infinite alternate;
    }

    @keyframes glow {
        from { text-shadow: 0 0 10px #fff, 0 0 20px #ffb6b9; }
        to { text-shadow: 0 0 20px #ffe8a1, 0 0 40px #fff; }
    }

    .recommend-box {
        background-color: rgba(255, 255, 255, 0.8);
        border-radius: 25px;
        padding: 25px;
        text-align: center;
        font-size: 25px;
        box-shadow: 0 0 30px rgba(255, 200, 200, 0.6);
    }

    .emoji-rain {
        font-size: 40px;
        text-align: center;
        animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-15px); }
    }
    </style>
    """,
    unsafe_allow_html=True
)

# 🌸 타이틀
st.markdown("<h1>👗 오늘의 패션 추천 프리미엄 💅</h1>", unsafe_allow_html=True)
st.markdown("<p style='text-align:center; font-size:20px;'>✨ 날씨 + 온도 기반, 스타일리시한 오늘의 룩을 추천해드려요! ✨</p>", unsafe_allow_html=True)
st.markdown("---")

# ☀️ 사용자 입력
weather = st.selectbox(
    "오늘의 날씨는 어떤가요? 🌤️",
    ["☀️ 맑음", "🌤️ 구름 조금", "☁️ 흐림", "🌧️ 비", "🌨️ 눈", "🌪️ 바람 많음"]
)

temperature = st.slider("현재 온도를 알려주세요 🌡️", -10, 40, 20)

st.markdown("---")

# 👕 추천 로직
def recommend_outfit(weather, temp):
    if temp >= 28:
        outfit = "😎 여름 한가운데! 반팔티 + 반바지 + 선글라스 🕶️ + 시원한 샌들 🩴"
    elif 23 <= temp < 28:
        outfit = "🌞 따뜻한 날씨엔 반팔티 + 얇은 셔츠 + 슬랙스 + 운동화 👟"
    elif 17 <= temp < 23:
        outfit = "🍂 선선한 날씨엔 긴팔티 + 가디건 or 얇은 자켓 🧥 + 청바지 👖"
    elif 10 <= temp < 17:
        outfit = "🌬️ 조금 쌀쌀해요! 맨투맨 or 니트 + 코트 🧥 + 스카프 🧣"
    elif 4 <= temp < 10:
        outfit = "❄️ 추운 날씨엔 패딩 🧊 + 목도리 🧣 + 장갑 🧤"
    else:
        outfit = "🥶 매우 추워요! 롱패딩 + 털모자 + 방한부츠 필수! ⛄"

    extra = {
        "☀️ 맑음": "햇빛 강함 ☀️ → 선크림 + 선글라스 필수 🕶️",
        "🌤️ 구름 조금": "산책하기 좋은 날씨 🚶‍♀️🌸",
        "☁️ 흐림": "조금 칙칙하니 밝은 색 옷 추천 💛",
        "🌧️ 비": "우산 ☂️ + 방수 신발 👢 꼭 챙기세요!",
        "🌨️ 눈": "따뜻하고 미끄럼 방지 신발 👢 신어요!",
        "🌪️ 바람 많음": "바람막이 자켓 🧥 or 후드티 추천 🌬️"
    }

    return outfit, extra[weather]

# 💫 버튼 클릭 시 결과 표시
if st.button("✨ 패션 추천 받기 💃"):
    outfit, comment = recommend_outfit(weather, temperature)

    st.markdown(
        f"""
        <div class='recommend-box'>
            <h2>{weather}</h2>
            <p style='font-size:30px;'>{outfit}</p>
            <p style='font-size:20px;'>{comment}</p>
        </div>
        """,
        unsafe_allow_html=True
    )

    emojis = ["💖", "🌸", "🌈", "✨", "🧥", "👗", "🧣", "👒", "🩴", "🎀", "💫"]
    emoji_string = "".join(random.choices(emojis, k=20))
    st.markdown(f"<div class='emoji-rain'>{emoji_string}</div>", unsafe_allow_html=True)

# 👠 하단 문구
st.markdown(
    """
    ---
    <p style='text-align:center; font-size:18px; color:gray;'>
    Made with 💖 by <b>ChatGPT GPT-5 x Streamlit</b> ✨<br>
    Stay fabulous, always! 👑
    </p>
    """,
    unsafe_allow_html=True
)
